<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Inline Reporting • epoxy</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Inline Reporting">
<meta property="og:description" content="epoxy">
<meta property="og:image" content="http://pkg.garrickadenbuie.com/epoxy/logo.png">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@grrrck">
<meta name="twitter:site" content="@grrrck">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-light navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">epoxy</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">1.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/epoxy.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/inline-reporting.html">Inline Reporting</a>
    </li>
    <li class="divider">
    </li>
<li>
      <a href="../articles/index.html">More articles...</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="../news/index.html">
    <span class="far fa-newspaper fa-lg"></span>
     
    
  </a>
</li>
<li>
  <a href="https://github.com/gadenbuie/epoxy" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://twitter.com/grrrck" class="external-link">
    <span class="fab fa-twitter fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://garrickadenbuie.com" class="external-link">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Inline Reporting</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/gadenbuie/epoxy/blob/HEAD/vignettes/inline-reporting.Rmd" class="external-link"><code>vignettes/inline-reporting.Rmd</code></a></small>
      <div class="hidden name"><code>inline-reporting.Rmd</code></div>

    </div>

    
    
<style type="text/css">
.epoxy-output {
    border-left: 2px solid var(--bs-primary, #0b535d);
    padding: 1em;
    margin-bottom: 1.5em;
}
.epoxy-output > :last-child {
  margin-bottom: 0;
}
</style>
<p>This vignette is heavily inspired by <a href="https://www.tjmahr.com/" class="external-link">Tristan Mahr</a>’s post <a href="https://www.tjmahr.com/lists-knitr-secret-weapon/" class="external-link"><em>Lists are
my secret weapon for reporting stats with knitr</em></a>. Please read
his original for an excellent introduction on how to better organize
your data for inline reporting scenarios with lists. I’m going to borrow
several examples directly from that post.</p>
<div class="section level2">
<h2 id="plug-in-reporting">Plug-in reporting<a class="anchor" aria-label="anchor" href="#plug-in-reporting"></a>
</h2>
<p>Both Tristan and Yihui Xie call <em>inline reporting</em> the act of
interleaving R expressions in the prose of markdown text. When you click
the <strong>Knit</strong> button or call
<code><a href="https://pkgs.rstudio.com/rmarkdown/reference/render.html" class="external-link">rmarkdown::render()</a></code> to build your report,
<code>knitr</code> evaluates these R expressions, turns them into text
and plugs them into your output.</p>
<p>The most common use case is for reporting descriptive statistics. To
illustrate, I’ll use the <a href="https://rdrr.io/r/datasets/Orange.html" class="external-link"><code>Orange</code>
dataset</a> which contains circumference measurements of 5 orange trees
at 7 points in time.</p>
<p>Here is some R code we might use to summarize the <code>Orange</code>
data:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">n_trees</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">Orange</span><span class="op">$</span><span class="va">Tree</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">n_timepoints</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">Orange</span><span class="op">$</span><span class="va">age</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>And here are some lines we might include in a report about the growth
of these trees:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>```{r setup, include = FALSE}</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>library(epoxy)</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>```</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>```{epoxy}</span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a>The dataset contains {nrow(Orange)} tree size measurements</span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a>from {n_trees} trees at {n_timepoints} time points in the study.</span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a>```</span></code></pre></div>
<div class="epoxy-output">
<p>The dataset contains 35 tree size measurements from 5 trees at 7
timepoints in the study.</p>
</div>
<p>With normal R Markdown <a href="https://bookdown.org/yihui/rmarkdown-cookbook/r-code.html" class="external-link">inline
reporting</a> we would have written this in our <code>.Rmd</code> file
instead:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>The dataset contains `r nrow(Orange)` tree size measurements</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>from `r n_trees` trees at `r n_timepoints` time points in the study.</span></code></pre></div>
<p>The two forms are very similar, but the <code>epoxy</code> chunk
approach provides a few advantages, as we’ll discover in this
vignette.</p>
</div>
<div class="section level2">
<h2 id="collect-your-variables-in-lists">Collect your variables in lists<a class="anchor" aria-label="anchor" href="#collect-your-variables-in-lists"></a>
</h2>
<p>In the above example, we used normal variables that were available in
the global environment of our document. But a small structural change
can bring great benefits. It’s worth reading <a href="https://www.tjmahr.com/lists-knitr-secret-weapon/" class="external-link">Tristan’s blog
post</a>, but to steal his thunder: store your data in lists.</p>
<p>We could, on the one hand, create variables named
<code>knitted_when</code>, <code>knitted_where</code> and
<code>knitted_with</code> that all store facts about the knitting
process. The <code>knitted_</code> prefix is helpful as an aid to
remember that these variables are related.</p>
<p>But you could store those three variables in a single object instead.
Bundling everything into a <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code> allows you to report the
results by accessing the list elements by name with <code>$</code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">knitted</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    when <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.Date</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    where <span class="op">=</span> <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/current_input.html" class="external-link">current_input</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    with <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="fu">utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/utils/packageDescription.html" class="external-link">packageVersion</a></span><span class="op">(</span><span class="st">"knitr"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    doc_url <span class="op">=</span> <span class="st">"https://rdrr.io/pkg/knitr/man/knit.html"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>```{epoxy}</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>Report prepared on {knitted$when} from `{knitted$where}`</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>with knitr version {knitted$with} {emo_ji('happy')}.</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>Read more about [`knitr::knit()`]({knitted$doc_url}).</span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>```</span></code></pre></div>
<div class="epoxy-output">
<p>Report prepared on 2024-04-17 from <code>inline-reporting.Rmd</code>
with knitr version 1.46 😆. Read more about <a href="https://rdrr.io/pkg/knitr/man/knit.html" class="external-link"><code>knitr::knit()</code></a>.</p>
</div>
<p>This is still essentially equivalent to R Markdown’s inline R chunks.
But <code>epoxy</code> chunks include a <code>.data</code> chunk
argument, which allows us to reference items in the <code>knitted</code>
list directly without having to use <code>$</code>.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>```{epoxy knitted-2, .data = knitted}</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>Report prepared on {when} from `{where}`</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>with knitr version {with} {emo_ji('happy')}.</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a>Read more about [`knitr::knit()`]({doc_url}).</span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>```</span></code></pre></div>
<div class="epoxy-output">
<p>Report prepared on 2024-04-17 from <code>inline-reporting.Rmd</code>
with knitr version 1.46 😆. Read more about <a href="https://rdrr.io/pkg/knitr/man/knit.html" class="external-link"><code>knitr::knit()</code></a>.</p>
</div>
<p>Note that we can still have arbitrary R code in epoxy inline
expressions: the <code>emo_ji()</code> function — a vignette-safe
version of <code>emo::ji()</code> — exists in my global environment.</p>
</div>
<div class="section level2">
<h2 id="reporting-model-results">Reporting Model Results<a class="anchor" aria-label="anchor" href="#reporting-model-results"></a>
</h2>
<p>Suppose we have some model results that we’ve prepared into a table
(for details, see <a href="https://www.tjmahr.com/lists-knitr-secret-weapon/" class="external-link">Tristan’s blog
post</a>). These results summarize a linear mixed model estimating
population averages for trees grown in several ozone conditions. I’ve
copied the resulting data frame into this vignette to avoid taking extra
dependencies for this vignette.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">text_ready</span> <span class="op">&lt;-</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>        term <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"intercept"</span>, <span class="st">"hund_days"</span>, <span class="st">"ozone"</span>, <span class="st">"hund_days_ozone"</span><span class="op">)</span>,</span>
<span>        estimate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"4.25"</span>, <span class="st">"0.34"</span>, <span class="st">"&amp;minus;0.14"</span>, <span class="st">"&amp;minus;0.04"</span><span class="op">)</span>,</span>
<span>        se <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.131</span>, <span class="fl">0.013</span>, <span class="fl">0.158</span>, <span class="fl">0.015</span><span class="op">)</span>,</span>
<span>        ci <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"[4.00, 4.51]"</span>, <span class="st">"[0.31, 0.36]"</span>, <span class="st">"[&amp;minus;0.45, 0.17]"</span>,<span class="st">"[&amp;minus;0.07, &amp;minus;0.01]"</span><span class="op">)</span>,</span>
<span>        stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>    <span class="op">)</span></span></code></pre></div>
<p>We can use <code><a href="https://rdrr.io/r/base/split.html" class="external-link">split()</a></code> to make a list of data frames that we
can index by the values in the <code>term</code> column.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">stats</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/split.html" class="external-link">split</a></span><span class="op">(</span><span class="va">text_ready</span>, <span class="va">text_ready</span><span class="op">$</span><span class="va">term</span><span class="op">)</span></span></code></pre></div>
<p>We now have a list of one-row dataframes:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">stats</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 4</span></span>
<span><span class="co">#&gt;  $ hund_days      :'data.frame': 1 obs. of  4 variables:</span></span>
<span><span class="co">#&gt;   ..$ term    : chr "hund_days"</span></span>
<span><span class="co">#&gt;   ..$ estimate: chr "0.34"</span></span>
<span><span class="co">#&gt;   ..$ se      : num 0.013</span></span>
<span><span class="co">#&gt;   ..$ ci      : chr "[0.31, 0.36]"</span></span>
<span><span class="co">#&gt;  $ hund_days_ozone:'data.frame': 1 obs. of  4 variables:</span></span>
<span><span class="co">#&gt;   ..$ term    : chr "hund_days_ozone"</span></span>
<span><span class="co">#&gt;   ..$ estimate: chr "&amp;minus;0.04"</span></span>
<span><span class="co">#&gt;   ..$ se      : num 0.015</span></span>
<span><span class="co">#&gt;   ..$ ci      : chr "[&amp;minus;0.07, &amp;minus;0.01]"</span></span>
<span><span class="co">#&gt;  $ intercept      :'data.frame': 1 obs. of  4 variables:</span></span>
<span><span class="co">#&gt;   ..$ term    : chr "intercept"</span></span>
<span><span class="co">#&gt;   ..$ estimate: chr "4.25"</span></span>
<span><span class="co">#&gt;   ..$ se      : num 0.131</span></span>
<span><span class="co">#&gt;   ..$ ci      : chr "[4.00, 4.51]"</span></span>
<span><span class="co">#&gt;  $ ozone          :'data.frame': 1 obs. of  4 variables:</span></span>
<span><span class="co">#&gt;   ..$ term    : chr "ozone"</span></span>
<span><span class="co">#&gt;   ..$ estimate: chr "&amp;minus;0.14"</span></span>
<span><span class="co">#&gt;   ..$ se      : num 0.158</span></span>
<span><span class="co">#&gt;   ..$ ci      : chr "[&amp;minus;0.45, 0.17]"</span></span></code></pre></div>
<p>Now we can write up our results with inline reporting:</p>
<pre><code>```{epoxy}
The average log-size in the control condition was
{stats$intercept$estimate} units,
95% Wald CI {stats$intercept$ci}.
There was not a statistically clear difference between the
ozone conditions for their intercepts (day-0 values),
*B* = {stats$ozone$estimate}, {stats$ozone$ci}.
For the control group, the average growth rate was
{stats$hund_days$estimate} log-size units per 100 days,
{stats$hund_days$ci}. The growth rate for
the ozone treatment group was significantly slower,
*diff* = {stats$hund_days_ozone$estimate},
{stats$hund_days_ozone$ci}.
```</code></pre>
<div class="epoxy-output">
<p>The average log-size in the control condition was 4.25 units, 95%
Wald CI [4.00, 4.51]. There was not a statistically clear difference
between the ozone conditions for their intercepts (day-0 values),
<em>B</em> = −0.14, [−0.45, 0.17]. For the control group, the average
growth rate was 0.34 log-size units per 100 days, [0.31, 0.36]. The
growth rate for the ozone treatment group was significantly slower,
<em>diff</em> = −0.04, [−0.07, −0.01].</p>
</div>
<div class="section level3">
<h3 id="inline-reporting-with-autocomplete">Inline reporting with autocomplete<a class="anchor" aria-label="anchor" href="#inline-reporting-with-autocomplete"></a>
</h3>
<p>What’s extra neat about epoxy — and not readily apparent if you’re
reading this vignette — is that RStudio’s autocomplete feature kicks in
when you type <code>stats$</code> inside a braced expression
<code><a href="https://rdrr.io/r/base/Paren.html" class="external-link">{ }</a></code>.</p>
<p>Actually, because the IDE doesn’t know about the <code>epoxy</code>
knitr engine, the autocomplete tries to help out on every word. It’s
typically easy to ignore the suggestions for words that are part of the
prose, and it’s usually outweighed by the usefulness of being able to
autocomplete the names in your data structures.</p>
</div>
<div class="section level3">
<h3 id="intermittent-inline-reporting">Intermittent inline-reporting<a class="anchor" aria-label="anchor" href="#intermittent-inline-reporting"></a>
</h3>
<p>Note that you don’t need to write your entire document or even
paragraph inside an <code>epoxy</code> chunk; you can wrap only the
data-heavy parts as needed.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>There was not a statistically clear difference between the</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>ozone conditions for their intercepts (day-0 values),</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a>```{epoxy}</span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a>*B* = {stats$ozone$estimate}, {stats$ozone$ci}.</span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a>```</span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a>The growth rate for the ozone treatment group was significantly slower,</span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a>```{epoxy}</span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a>*diff* = {stats$hund_days_ozone$estimate}, {stats$hund_days_ozone$ci}.</span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a>```</span></code></pre></div>
<div class="epoxy-output">
<p>There was not a statistically clear difference between the ozone
conditions for their intercepts (day-0 values), <em>B</em> = −0.14,
[−0.45, 0.17]. The growth rate for the ozone treatment group was
significantly slower, <em>diff</em> = −0.04, [−0.07, −0.01].</p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="repeated-inline-reporting">Repeated inline reporting<a class="anchor" aria-label="anchor" href="#repeated-inline-reporting"></a>
</h2>
<p>Occasionally you may need to re-use the same phrase or document
structure but for different slices of your data.</p>
<div class="section level3">
<h3 id="vectorized-inline-reporting-chunks">Vectorized inline reporting chunks<a class="anchor" aria-label="anchor" href="#vectorized-inline-reporting-chunks"></a>
</h3>
<p>Suppose we summarize the orange tree growth (normally I would use a
combination of <code><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">dplyr::group_by()</a></code> and
<code><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">dplyr::summarize()</a></code> here.)</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">summarize_tree_growth</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">tree</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">tree</span> <span class="op">&lt;-</span> <span class="va">Orange</span><span class="op">[</span><span class="va">Orange</span><span class="op">$</span><span class="va">Tree</span> <span class="op">==</span> <span class="va">tree</span>, <span class="op">]</span></span>
<span>    <span class="va">tree</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>        tree <span class="op">=</span> <span class="va">tree</span><span class="op">$</span><span class="va">Tree</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,</span>
<span>        age_range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/diff.html" class="external-link">diff</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/range.html" class="external-link">range</a></span><span class="op">(</span><span class="va">tree</span><span class="op">$</span><span class="va">age</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        circumference_first <span class="op">=</span> <span class="va">tree</span><span class="op">$</span><span class="va">circumference</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,</span>
<span>        circumference_last <span class="op">=</span> <span class="va">tree</span><span class="op">$</span><span class="va">circumference</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">tree</span><span class="op">)</span><span class="op">]</span></span>
<span>    <span class="op">)</span></span>
<span>    <span class="va">tree</span><span class="op">$</span><span class="va">growth_rate</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="va">tree</span>, <span class="op">(</span><span class="va">circumference_last</span> <span class="op">-</span> <span class="va">circumference_first</span><span class="op">)</span> <span class="op">/</span> <span class="va">age_range</span><span class="op">)</span></span>
<span>    <span class="va">tree</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">orange_summary</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="va">summarize_tree_growth</span><span class="op">)</span></span>
<span><span class="va">orange_summary</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">rbind</span>, <span class="va">orange_summary</span><span class="op">)</span></span>
<span><span class="va">orange_summary</span></span>
<span><span class="co">#&gt;   tree age_range circumference_first circumference_last growth_rate</span></span>
<span><span class="co">#&gt; 1    1      1464                  30                145  0.07855191</span></span>
<span><span class="co">#&gt; 2    2      1464                  33                203  0.11612022</span></span>
<span><span class="co">#&gt; 3    3      1464                  30                140  0.07513661</span></span>
<span><span class="co">#&gt; 4    4      1464                  32                214  0.12431694</span></span>
<span><span class="co">#&gt; 5    5      1464                  30                177  0.10040984</span></span></code></pre></div>
<p><code>epoxy</code> chunks, like <code><a href="https://glue.tidyverse.org/reference/glue.html" class="external-link">glue::glue()</a></code>, are
vectorized, so if we find ourselves needing to repeat the same thing
over and over again, we can use this feature to our advantage.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>A quick recap of the growth observed in the orange trees:</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a>```{epoxy .data = orange_summary}</span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a>- Tree number {tree} started out at {circumference_first}mm and,</span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a>  over {age_range} days, grew to be {circumference_last}mm.</span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a>```</span></code></pre></div>
<div class="epoxy-output">
<p>A quick recap of the growth observed in the orange trees:</p>
<ul>
<li>Tree number 1 started out at 30mm and, over 1464 days, grew to be
145mm.</li>
<li>Tree number 2 started out at 33mm and, over 1464 days, grew to be
203mm.</li>
<li>Tree number 3 started out at 30mm and, over 1464 days, grew to be
140mm.</li>
<li>Tree number 4 started out at 32mm and, over 1464 days, grew to be
214mm.</li>
<li>Tree number 5 started out at 30mm and, over 1464 days, grew to be
177mm.</li>
</ul>
</div>
</div>
<div class="section level3">
<h3 id="template-inline-reporting-chunks">Template inline reporting chunks<a class="anchor" aria-label="anchor" href="#template-inline-reporting-chunks"></a>
</h3>
<p>By using <a href="https://bookdown.org/yihui/rmarkdown-cookbook/reuse-chunks.html#ref-label" class="external-link">knitr’s
reference labels feature</a>, and the <code>epoxy</code>
<code>.data</code> chunk option we saw above, you can create an epoxy
template that you can re-use like a parameterized chunk.</p>
<p>You start by creating a labelled <code>epoxy</code> chunk with
<code>eval = FALSE</code></p>
<div class="sourceCode" id="cb14"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a>```{epoxy average-growth, eval=FALSE}</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a>an average of {signif(growth_rate * 7, 2)}mm per week.</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a>```</span></code></pre></div>
<p>that you can later use in your prose by referencing the chunk with
<code>ref.label</code> and providing a different slice of data via the
<code>.data</code> chunk option.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a>The fourth tree was the largest tree at the end of the study, growing</span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a>```{epoxy ref.label="average-growth", .data = summarize_tree_growth(4)}</span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a>```</span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a>Meanwhile, the smallest tree was the third, which grew at</span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a>```{epoxy ref.label="average-growth", .data = summarize_tree_growth(3)}</span>
<span id="cb15-6"><a href="#cb15-6" tabindex="-1"></a>```</span></code></pre></div>
<div class="epoxy-output">
<p>The fourth tree was the largest tree at the end of the study, growing
an average of 0.87mm per week. Meanwhile, the smallest tree was the
third, which grew at an average of 0.53mm per week.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by <a href="https://www.garrickadenbuie.com" class="external-link">Garrick Aden-Buie</a>.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.8.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
